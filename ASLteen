<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SignQuest üêØ</title>
<script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#eef5ff;
  text-align:center;
}

header{
  background:#58cc02;
  color:white;
  padding:20px;
  position:relative;
}

#mascot{
  position:absolute;
  left:15px;
  top:10px;
  width:80px;
  animation:bounce 2s infinite;
}

@keyframes bounce{
  0%,100%{transform:translateY(0);}
  50%{transform:translateY(-8px);}
}

.stats{
  margin-top:5px;
  font-size:14px;
}

.level-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(90px,1fr));
  gap:10px;
  padding:20px;
}

.level{
  background:white;
  padding:12px;
  border-radius:15px;
  cursor:pointer;
  box-shadow:0 4px 10px rgba(0,0,0,0.1);
  transition:.2s;
}

.level:hover{ transform:scale(1.05); }

.locked{ opacity:0.3; cursor:not-allowed; }

.lesson-box{
  display:none;
  background:white;
  margin:20px;
  padding:20px;
  border-radius:15px;
}

button{
  padding:10px 18px;
  border:none;
  border-radius:10px;
  background:#58cc02;
  color:white;
  font-size:15px;
  cursor:pointer;
  margin:5px;
}

iframe{
  width:100%;
  height:250px;
  border-radius:15px;
}

.progress{
  height:15px;
  background:#ddd;
  margin:15px;
  border-radius:10px;
  overflow:hidden;
}

.progress-bar{
  height:100%;
  background:#58cc02;
  width:0%;
  transition:width .4s ease;
}

footer{margin-top:30px;padding:20px;}
</style>
</head>
<body>

<header>
<img id="mascot" src="https://i.imgur.com/6X4GQ5P.png">
<h1>SignQuest</h1>
<div class="stats">
XP: <span id="xp">0</span> |
üî• Streak: <span id="streak">0</span>
</div>
<button onclick="toggleMusic()">üéµ Toggle Music</button>
</header>

<div class="progress"><div class="progress-bar" id="progressBar"></div></div>

<div class="level-grid" id="levels"></div>

<div class="lesson-box" id="lessonBox">
<h2 id="lessonTitle"></h2>
<div id="lessonContent"></div>
<button onclick="nextLesson()">Next</button>
</div>

<h3>Scan QR to Open</h3>
<canvas id="qr"></canvas>

<audio id="bgMusic" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_115b9b6f18.mp3?filename=relaxing-145038.mp3"></audio>

<script>
let xp = parseInt(localStorage.getItem("xp")) || 0;
let unlocked = parseInt(localStorage.getItem("unlocked")) || 1;
let streak = parseInt(localStorage.getItem("streak")) || 0;

document.getElementById("xp").innerText=xp;
document.getElementById("streak").innerText=streak;

const levelsDiv=document.getElementById("levels");

for(let i=1;i<=10;i++){
  const div=document.createElement("div");
  div.className="level";
  if(i>unlocked) div.classList.add("locked");
  div.innerText="Level "+i;
  div.onclick=()=>{ if(i<=unlocked) startLevel(i); };
  levelsDiv.appendChild(div);
}

let currentLevel=0;

function startLevel(level){
  currentLevel=level;
  document.getElementById("lessonBox").style.display="block";
  showLesson();
}

function showLesson(){
  document.getElementById("lessonTitle").innerText="Level "+currentLevel;

  const videos={
    1:"https://www.youtube.com/embed/AYjFPCHXkj4",
    2:"https://www.youtube.com/embed/sHyG7iz3ork",
    3:"https://www.youtube.com/embed/3KJH1bJ9yqE"
  };

  if(videos[currentLevel]){
    document.getElementById("lessonContent").innerHTML=
      `<iframe src="${videos[currentLevel]}" allowfullscreen></iframe>`;
  } else{
    document.getElementById("lessonContent").innerHTML=
      "<p>Practice common ASL phrases!</p>";
  }

  document.getElementById("progressBar").style.width=
    (currentLevel/unlocked)*100+"%";
}

function nextLesson(){
  xp+=20;
  unlocked++;
  localStorage.setItem("xp",xp);
  localStorage.setItem("unlocked",unlocked);
  location.reload();
}

function toggleMusic(){
  const music=document.getElementById("bgMusic");
  music.paused?music.play():music.pause();
}

QRCode.toCanvas(document.getElementById('qr'), window.location.href);
</script>

</body>
</html>
