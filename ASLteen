<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ASLteen</title>

<script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>

<style>
:root {
  --blue: #2563eb;
  --red: #ef4444;
}

body {
  margin:0;
  font-family: Arial, sans-serif;
  background:#f8fafc;
  text-align:center;
}

header {
  background: linear-gradient(135deg, var(--blue), var(--red));
  color:white;
  padding:20px;
}

#mascot {
  width:90px;
}

.stats {
  margin-top:10px;
}

#hearts {
  font-size:22px;
  color:var(--red);
}

.level-grid {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(90px,1fr));
  gap:10px;
  padding:20px;
}

.level {
  background:var(--blue);
  color:white;
  padding:12px;
  border-radius:12px;
  cursor:pointer;
}

.locked {
  background:#94a3b8;
  opacity:0.5;
  cursor:not-allowed;
}

.lesson {
  display:none;
  background:white;
  margin:20px;
  padding:25px;
  border-radius:15px;
  box-shadow:0 5px 15px rgba(0,0,0,0.1);
}

button {
  background:var(--red);
  border:none;
  padding:10px 18px;
  border-radius:10px;
  color:white;
  cursor:pointer;
  margin:5px;
  font-weight:bold;
}

.progress {
  height:10px;
  background:#ddd;
  margin:15px 20px;
  border-radius:10px;
  overflow:hidden;
}

.progress-bar {
  height:100%;
  background:var(--red);
  width:0%;
  transition:0.3s;
}

audio {
  display:none;
}
</style>
</head>

<body>

<header>
<img id="mascot" src="https://i.imgur.com/VuV3K6F.png" alt="Diego">
<h1>ASLteen</h1>

<div class="stats">
XP: <span id="xp">0</span> |
üî• Streak: <span id="streak">0</span>
<div id="hearts">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
</div>

<button onclick="toggleMusic()">üéµ Music</button>
</header>

<div class="progress">
<div class="progress-bar" id="progressBar"></div>
</div>

<div class="level-grid" id="levels"></div>

<div class="lesson" id="lessonBox">
<h2>Level 1</h2>
<p>Welcome to ASLteen!</p>
<button onclick="completeLesson()">Complete Lesson</button>
</div>

<h3>Scan QR</h3>
<canvas id="qr"></canvas>

<audio id="music" loop>
<source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_115b9b6f18.mp3?filename=relaxing-145038.mp3">
</audio>

<script>

let xp = parseInt(localStorage.getItem("xp")) || 0;
let streak = parseInt(localStorage.getItem("streak")) || 0;
let hearts = 5;

document.getElementById("xp").innerText = xp;
document.getElementById("streak").innerText = streak;

const today = new Date().toDateString();
if(localStorage.getItem("lastVisit") !== today){
  streak++;
  localStorage.setItem("streak", streak);
  localStorage.setItem("lastVisit", today);
}

document.getElementById("streak").innerText = streak;

const levelsDiv = document.getElementById("levels");

for(let i=1;i<=30;i++){
  let div = document.createElement("div");
  div.className="level";
  if(i>1) div.classList.add("locked");
  div.innerText="Level "+i;
  div.onclick=()=>{ if(i===1) startLesson(); };
  levelsDiv.appendChild(div);
}

function startLesson(){
  document.getElementById("lessonBox").style.display="block";
}

function completeLesson(){
  xp += 10;
  localStorage.setItem("xp", xp);
  document.getElementById("xp").innerText = xp;
  document.getElementById("progressBar").style.width = "100%";
  alert("Great job! +10 XP üéâ");
}

function toggleMusic(){
  const m = document.getElementById("music");
  if(m.paused){
    m.play();
  } else {
    m.pause();
  }
}

QRCode.toCanvas(document.getElementById('qr'), window.location.href);

</script>

</body>
</html>
