<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SignQuest</title>
<script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
<style>
body{
margin:0;
font-family:Arial, sans-serif;
background:#f4f6fa;
text-align:center;
}
header{
background:#58cc02;
color:white;
padding:20px;
}
.level-grid{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(110px,1fr));
gap:15px;
padding:20px;
}
.level{
background:white;
padding:15px;
border-radius:15px;
cursor:pointer;
box-shadow:0 5px 10px rgba(0,0,0,0.1);
transition:0.2s;
}
.level:hover{transform:scale(1.05);}
.locked{opacity:0.4;cursor:not-allowed;}
.lesson-box{
display:none;
background:white;
margin:20px;
padding:25px;
border-radius:15px;
}
button{
padding:10px 20px;
border:none;
border-radius:10px;
background:#58cc02;
color:white;
font-size:16px;
cursor:pointer;
margin:10px;
}
.progress{
height:15px;
background:#ddd;
border-radius:10px;
margin:15px;
}
.progress-bar{
height:100%;
background:#58cc02;
width:0%;
border-radius:10px;
}
iframe{
width:100%;
max-width:500px;
height:280px;
border-radius:15px;
}
#camera{display:none;margin-top:10px;}
#startScreen{
position:fixed;
top:0;left:0;
width:100%;
height:100%;
background:#58cc02;
color:white;
display:flex;
flex-direction:column;
justify-content:center;
align-items:center;
z-index:10;
}
</style>
</head>
<body>

<div id="startScreen">
<h1>SignQuest âœ‹</h1>
<p>Master ASL the Fun Way</p>
<button onclick="startApp()">Start Learning</button>
</div>

<header>
<h2>SignQuest</h2>
<p>XP: <span id="xp">0</span></p>
<button onclick="toggleMusic()">Toggle Music</button>
</header>

<div class="progress">
<div class="progress-bar" id="progressBar"></div>
</div>

<div class="level-grid" id="levels"></div>

<div class="lesson-box" id="lessonBox">
<h3 id="lessonTitle"></h3>
<iframe id="lessonVideo" allowfullscreen></iframe>
<br>
<button onclick="nextLesson()">Next Lesson</button>
<button onclick="startCamera()">Camera Mode</button>
<video id="camera" width="200" autoplay></video>
</div>

<h3>Scan QR Code</h3>
<canvas id="qr"></canvas>

<audio id="bgMusic" loop>
<source src="https://cdn.pixabay.com/audio/2022/03/15/audio_4b6d7d88e4.mp3" type="audio/mpeg">
</audio>

<audio id="clickSound">
<source src="https://cdn.pixabay.com/audio/2022/03/15/audio_115b9b3bb6.mp3" type="audio/mpeg">
</audio>

<script>
let xp = localStorage.getItem("xp") || 0;
let unlocked = localStorage.getItem("unlocked") || 1;
xp = parseInt(xp);
unlocked = parseInt(unlocked);
document.getElementById("xp").innerText = xp;

const lessons = {
1:[
"AYjFPCHXkj4",
"AYjFPCHXkj4",
"AYjFPCHXkj4",
"AYjFPCHXkj4",
"AYjFPCHXkj4",
"AYjFPCHXkj4"
],
2:[
"differentVideoID1",
"differentVideoID2",
"differentVideoID3",
"differentVideoID4",
"differentVideoID5",
"differentVideoID6"
],
3:[
"differentVideoID1",
"differentVideoID2",
"differentVideoID3",
"differentVideoID4",
"differentVideoID5",
"differentVideoID6"
]
};

const levelsDiv=document.getElementById("levels");
for(let i=1;i<=30;i++){
const div=document.createElement("div");
div.className="level";
if(i>unlocked)div.classList.add("locked");
div.innerText="Level "+i;
div.onclick=()=>{if(i<=unlocked)startLevel(i)};
levelsDiv.appendChild(div);
}

let currentLevel=0;
let lessonStep=0;

function startApp(){
document.getElementById("startScreen").style.display="none";
document.getElementById("bgMusic").play();
}

function startLevel(level){
currentLevel=level;
lessonStep=0;
document.getElementById("lessonBox").style.display="block";
showLesson();
}

function showLesson(){
document.getElementById("lessonTitle").innerText="Level "+currentLevel+" - Lesson "+(lessonStep+1);

let videoID = lessons[currentLevel] ? lessons[currentLevel][lessonStep] : "AYjFPCHXkj4";

window.open("https://www.youtube.com/watch?v=" + videoID, "_blank");

updateProgress();
}
function nextLesson(){
document.getElementById("clickSound").play();
lessonStep++;
if(lessonStep<6){
showLesson();
}else{
xp+=15;
document.getElementById("xp").innerText=xp;
localStorage.setItem("xp",xp);
if(currentLevel===unlocked){
unlocked++;
localStorage.setItem("unlocked",unlocked);
}
alert("Level Complete! +15 XP ðŸŽ‰");
location.reload();
}
}

function updateProgress(){
let percent=(lessonStep/6)*100;
document.getElementById("progressBar").style.width=percent+"%";
}

function toggleMusic(){
let music=document.getElementById("bgMusic");
if(music.paused)music.play();
else music.pause();
}

function startCamera(){
const video=document.getElementById("camera");
video.style.display="block";
navigator.mediaDevices.getUserMedia({video:true})
.then(stream=>{video.srcObject=stream;});
}

QRCode.toCanvas(document.getElementById("qr"), window.location.href);
</script>

</body>
</html>
