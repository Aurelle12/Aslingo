<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SignQuest</title>
<script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
<style>
body {
  margin:0;
  font-family: Arial, sans-serif;
  background:#f5f7fb;
  text-align:center;
}
header {
  background:#58cc02;
  color:white;
  padding:20px;
}
.level-grid {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(100px,1fr));
  gap:15px;
  padding:20px;
}
.level {
  background:white;
  padding:15px;
  border-radius:15px;
  cursor:pointer;
  box-shadow:0 5px 10px rgba(0,0,0,0.1);
}
.locked {
  opacity:0.4;
  cursor:not-allowed;
}
.lesson-box {
  display:none;
  background:white;
  margin:20px;
  padding:25px;
  border-radius:15px;
}
button {
  padding:10px 20px;
  border:none;
  border-radius:10px;
  background:#58cc02;
  color:white;
  font-size:16px;
  cursor:pointer;
  margin-top:10px;
}
.progress {
  height:15px;
  background:#ddd;
  border-radius:10px;
  margin:15px;
}
.progress-bar {
  height:100%;
  background:#58cc02;
  width:0%;
  border-radius:10px;
}
#camera {
  display:none;
  margin-top:10px;
}
footer {
  margin-top:30px;
  padding:20px;
  font-size:14px;
}
</style>
</head>
<body>

<header>
<h1>SignQuest âœ‹</h1>
<p>Master ASL â€“ 30 Levels</p>
<p>XP: <span id="xp">0</span></p>
</header>

<div class="progress"><div class="progress-bar" id="progressBar"></div></div>

<div class="level-grid" id="levels"></div>

<div class="lesson-box" id="lessonBox">
<h2 id="lessonTitle"></h2>
<p id="lessonContent" style="font-size:40px;"></p>
<button onclick="nextLesson()">Next</button>
<button onclick="startCamera()">Camera Mode</button>
<video id="camera" width="200" autoplay></video>
</div>

<h3>Scan QR to open this site</h3>
<canvas id="qr"></canvas>

<footer>
SignQuest â€“ ASL Learning Platform
</footer>

<script>
let xp = localStorage.getItem("xp") || 0;
let unlocked = localStorage.getItem("unlocked") || 1;
xp = parseInt(xp);
unlocked = parseInt(unlocked);
document.getElementById("xp").innerText = xp;

const levelsDiv = document.getElementById("levels");
for(let i=1;i<=30;i++){
  const div=document.createElement("div");
  div.className="level";
  if(i>unlocked) div.classList.add("locked");
  div.innerText="Level "+i;
  div.onclick=()=>{ if(i<=unlocked) startLevel(i); };
  levelsDiv.appendChild(div);
}

let currentLevel=0;
let lessonStep=0;

function startLevel(level){
  currentLevel=level;
  lessonStep=0;
  document.getElementById("lessonBox").style.display="block";
  showLesson();
}

function showLesson(){
  document.getElementById("lessonTitle").innerText="Level "+currentLevel+" - Lesson "+(lessonStep+1);
  document.getElementById("lessonContent").innerText=getLessonContent(currentLevel,lessonStep);
  updateProgress();
}

function nextLesson(){
  lessonStep++;
  if(lessonStep<6){
    showLesson();
  } else {
    xp+=10;
    document.getElementById("xp").innerText=xp;
    localStorage.setItem("xp",xp);
    if(currentLevel===unlocked){
      unlocked++;
      localStorage.setItem("unlocked",unlocked);
    }
    alert("Level Complete! +10 XP ðŸŽ‰");
    location.reload();
  }
}

function updateProgress(){
  const percent=((lessonStep)/6)*100;
  document.getElementById("progressBar").style.width=percent+"%";
}

function getLessonContent(level,step){
  const alphabet=["ðŸ…°ï¸","ðŸ…±ï¸","ðŸ…²ï¸","ðŸ…³ï¸","ðŸ…´ï¸","ðŸ…µï¸"];
  const phrases=["ðŸ‘‹","ðŸ™","ðŸ‘","ðŸ¤Ÿ","â¤ï¸","â“"];
  if(level===1) return alphabet[step];
  if(level===2) return phrases[step];
  if(level===3) return "How are you? ðŸ¤”";
  return "ASL Sign Practice âœ‹ (Level "+level+")";
}

function startCamera(){
  const video=document.getElementById("camera");
  video.style.display="block";
  navigator.mediaDevices.getUserMedia({video:true})
    .then(stream=>{video.srcObject=stream;});
}

QRCode.toCanvas(document.getElementById('qr'), window.location.href);
</script>

</body>
</html>
