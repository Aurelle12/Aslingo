<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ASL AI Vision Game</title>

<script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"></script>

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:linear-gradient(135deg,#0f172a,#1e3a8a);
  color:white;
  text-align:center;
}

#tiger{
  position:fixed;
  top:10px;
  right:15px;
  font-size:60px;
}

h1{ color:#ef4444; }

.level{
  background:#ef4444;
  padding:15px;
  margin:10px;
  border-radius:15px;
  cursor:pointer;
  display:inline-block;
}

.level:hover{
  background:#3b82f6;
}

video{
  width:350px;
  border-radius:15px;
  margin-top:10px;
}

canvas{
  position:absolute;
  left:0;
  top:0;
}

.lesson{
  display:none;
  margin-top:20px;
}

button{
  background:#ef4444;
  border:none;
  padding:10px;
  border-radius:10px;
  color:white;
  margin-top:10px;
  cursor:pointer;
}
</style>
</head>

<body>

<div id="tiger">üêØ</div>

<h1>ASL AI Recognition System</h1>

<div>
  <div class="level" onclick="startLevel(1)">Level 1</div>
  <div class="level" onclick="startLevel(2)">Level 2</div>
  <div class="level" onclick="startLevel(3)">Level 3</div>
  <div class="level" onclick="startLevel(4)">Level 4</div>
</div>

<div class="lesson" id="lessonBox">
  <h2 id="lessonTitle"></h2>
  <div id="lessonContent"></div>
</div>

<script>

let currentLetter = "";
const alphabet = ["A","B","C","D","E"];

function startLevel(level){
  document.getElementById("lessonBox").style.display="block";
  document.getElementById("lessonTitle").innerText="Level "+level;

  if(level===1){
    document.getElementById("lessonContent").innerHTML=
    `<iframe width="560" height="315"
    src="https://www.youtube.com/embed/VIDEO_ID_1"
    allowfullscreen></iframe>`;
  }

  if(level===2){
    startCameraQuiz();
  }

  if(level===3){
    document.getElementById("lessonContent").innerHTML=
    `<iframe width="560" height="315"
    src="https://www.youtube.com/embed/VIDEO_ID_2"
    allowfullscreen></iframe>`;
  }

  if(level===4){
    startCameraQuiz();
  }
}

function startCameraQuiz(){

  currentLetter = alphabet[Math.floor(Math.random()*alphabet.length)];

  document.getElementById("lessonContent").innerHTML=`
    <p>Sign the letter: <strong>${currentLetter}</strong></p>
    <video id="video" autoplay></video>
    <canvas id="output"></canvas>
    <p id="result"></p>
  `;

  const videoElement = document.getElementById('video');
  const canvasElement = document.getElementById('output');
  const canvasCtx = canvasElement.getContext('2d');

  const hands = new Hands({
    locateFile: file => `https://cdn.jsdelivr.net/npm/@mediapipe/hands/${file}`
  });

  hands.setOptions({
    maxNumHands: 1,
    modelComplexity: 1,
    minDetectionConfidence: 0.7,
    minTrackingConfidence: 0.7
  });

  hands.onResults(results => {
    canvasCtx.save();
    canvasCtx.clearRect(0,0,canvasElement.width,canvasElement.height);
    canvasCtx.drawImage(results.image,0,0,
      canvasElement.width,canvasElement.height);

    if(results.multiHandLandmarks.length > 0){
      document.getElementById("result").innerText =
      "AI detected a hand. Analyzing sign...";
      
      // SIMPLIFIED detection example
      if(currentLetter === "A"){
        document.getElementById("result").innerText =
        "AI thinks this might be A!";
      }
    }

    canvasCtx.restore();
  });

  const camera = new Camera(videoElement,{
    onFrame: async () => {
      await hands.send({image: videoElement});
    },
    width:350,
    height:300
  });
  camera.start();
}

</script>

</body>
</html>
