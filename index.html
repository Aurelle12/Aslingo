<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SignQuest</title>

<style>
body {
  margin:0;
  font-family: 'Segoe UI', sans-serif;
  background:#f4f8ff;
  text-align:center;
}
header {
  background:#58cc02;
  color:white;
  padding:20px;
}
.level-grid {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(110px,1fr));
  gap:15px;
  padding:20px;
}
.level {
  background:white;
  padding:15px;
  border-radius:20px;
  cursor:pointer;
  box-shadow:0 6px 12px rgba(0,0,0,0.1);
  transition:0.2s;
}
.level:hover { transform:scale(1.05); }
.locked { opacity:0.4; cursor:not-allowed; }

.lesson-box {
  display:none;
  background:white;
  margin:20px;
  padding:25px;
  border-radius:20px;
  box-shadow:0 6px 12px rgba(0,0,0,0.1);
}

img {
  width:200px;
  margin:15px;
}

button {
  padding:10px 20px;
  border:none;
  border-radius:12px;
  background:#58cc02;
  color:white;
  font-size:16px;
  cursor:pointer;
  margin:10px;
}

.progress {
  height:15px;
  background:#ddd;
  border-radius:10px;
  margin:15px;
}
.progress-bar {
  height:100%;
  background:#58cc02;
  width:0%;
  border-radius:10px;
}

.music-btn {
  background:#1cb0f6;
}
</style>
</head>
<body>

<header>
<h1>SignQuest âœ‹</h1>
<p>Learn ASL the Fun Way</p>
<p>XP: <span id="xp">0</span></p>
<button class="music-btn" onclick="toggleMusic()">Toggle Music ðŸŽµ</button>
</header>

<div class="progress"><div class="progress-bar" id="progressBar"></div></div>

<div class="level-grid" id="levels"></div>

<div class="lesson-box" id="lessonBox">
<h2 id="lessonTitle"></h2>
<img id="lessonImage">
<p id="lessonText"></p>
<button onclick="nextLesson()">Next</button>
</div>

<audio id="bgMusic" loop>
  <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_c8c8a73467.mp3?filename=happy-day-113985.mp3" type="audio/mpeg">
</audio>

<script>
let xp = localStorage.getItem("xp") || 0;
let unlocked = localStorage.getItem("unlocked") || 1;
xp = parseInt(xp);
unlocked = parseInt(unlocked);
document.getElementById("xp").innerText = xp;

const levelsDiv = document.getElementById("levels");

for(let i=1;i<=30;i++){
  const div=document.createElement("div");
  div.className="level";
  if(i>unlocked) div.classList.add("locked");
  div.innerText="Level "+i;
  div.onclick=()=>{ if(i<=unlocked) startLevel(i); };
  levelsDiv.appendChild(div);
}

let currentLevel=0;
let lessonStep=0;

function startLevel(level){
  currentLevel=level;
  lessonStep=0;
  document.getElementById("lessonBox").style.display="block";
  showLesson();
}

function showLesson(){
  document.getElementById("lessonTitle").innerText="Level "+currentLevel+" - Lesson "+(lessonStep+1);
  document.getElementById("lessonText").innerText=getLessonText(currentLevel,lessonStep);
  document.getElementById("lessonImage").src=getLessonImage(currentLevel);
  updateProgress();
}

function nextLesson(){
  lessonStep++;
  if(lessonStep<6){
    showLesson();
  } else {
    xp+=15;
    document.getElementById("xp").innerText=xp;
    localStorage.setItem("xp",xp);
    if(currentLevel===unlocked){
      unlocked++;
      localStorage.setItem("unlocked",unlocked);
    }
    confetti();
    alert("Level Complete! +15 XP ðŸŽ‰");
    location.reload();
  }
}

function updateProgress(){
  const percent=(lessonStep/6)*100;
  document.getElementById("progressBar").style.width=percent+"%";
}

function getLessonText(level,step){
  if(level===1) return "Alphabet Sign Practice";
  if(level===2) return "Common ASL Phrases";
  if(level===3) return "Daily Questions";
  return "Advanced Sign Practice";
}

function getLessonImage(level){
  if(level===1) return "https://api.dicebear.com/7.x/bottts/svg?seed=alphabet";
  if(level===2) return "https://api.dicebear.com/7.x/bottts/svg?seed=phrases";
  if(level===3) return "https://api.dicebear.com/7.x/bottts/svg?seed=questions";
  return "https://api.dicebear.com/7.x/bottts/svg?seed=level"+level;
}

function toggleMusic(){
  const music=document.getElementById("bgMusic");
  if(music.paused){
    music.play();
  } else {
    music.pause();
  }
}

function confetti(){
  for(let i=0;i<100;i++){
    let conf=document.createElement("div");
    conf.style.position="fixed";
    conf.style.width="8px";
    conf.style.height="8px";
    conf.style.background="hsl("+Math.random()*360+",100%,50%)";
    conf.style.left=Math.random()*100+"%";
    conf.style.top="-10px";
    conf.style.opacity=1;
    conf.style.transition="top 2s linear";
    document.body.appendChild(conf);
    setTimeout(()=>{conf.style.top="100%";},10);
    setTimeout(()=>{conf.remove();},2000);
  }
}
</script>

</body>
</html>
